<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>(ì™¸ë¶€)ì„¤ë¬¸ ì‘ì‹œ ëª©ë¡</title>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
<style>
    li {
        list-style: none;
        float: left;
    }
    /* ğŸ”‘ CSS ìŠ¤íƒ€ì¼ ì •ì˜ */
    .styled-table {
        width: 100%;
        border-collapse: collapse; /* ì…€ ì‚¬ì´ì˜ ê°„ê²© ì œê±° */
        font-family: Arial, sans-serif;
    }

    .styled-table th, .styled-table td {
        border: 1px solid #ddd; /* ëª¨ë“  ì…€ì— ì–‡ì€ íšŒìƒ‰ ê²½ê³„ì„  ì¶”ê°€ */
        padding: 8px;
        text-align: left;
    }

    .styled-table th {
        background-color: #f2f2f2; /* í—¤ë” ë°°ê²½ìƒ‰ */
        color: #333;
    }

    .styled-table tbody tr:hover {
        background-color: #f5f5f5; /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ìƒ‰ìƒ ë³€ê²½ (ì„ íƒì‚¬í•­) */
    }
</style>
</head>
<body>
<form id="searchForm">
<table class="styled-table">
    <thead>
        <th>ë²ˆí˜¸</th>
        <th>ì—…ì²´ëª…</th>
        <th>í‰ê°€ìID</th>
        <th>í‰ê°€ìëª…</th>
        <th>ì ê²€ì¼ì‹œ</th>
        <th>ì¢…í•©ì ìˆ˜</th>
    </thead>
    <tbody id="boardBody">
        <tr th:each="survey, stat : ${surveyList}"
            th:data-session-key="${survey.SESSIONKEY}"
            th:data-user-id="${survey.USERID}"
            style="cursor: pointer;">
            <td th:text="${stat.count}"></td>
            <td th:text="${survey.COMPANYNM}"></td>
            <td th:text="${survey.USERID}"></td>
            <td th:text="${survey.USERNM}"></td>
            <td th:text="${#dates.format(survey.ANSWERAT, 'yyyy-MM-dd HH:mm')}"></td>
            <td th:text="${survey.TOTALSCORE}"></td>
        </tr>
    </tbody>
</table>
<!--    <div class="tbl-paging"></div>-->
</form>

<script th:inline="javascript" type="text/javascript">
    /* <![CDATA[ */
    $(document).ready(function() {
        // 1. tbody ë‚´ì˜ ëª¨ë“  í–‰(tr)ì— í´ë¦­ ì´ë²¤íŠ¸ ë°”ì¸ë”©
        $('#boardBody tr').on('click', function() {
            const sessionKey = $(this).data('session-key');
            const userId = $(this).data('user-id');

            if (sessionKey) {
                // 3. ìƒì„¸ ì¡°íšŒ URLë¡œ ì´ë™
                location.href = "/survey/ext/detail?userId=" + userId + "&sessionKey=" + sessionKey;
            } else {
                alert("Session Key not found on selected row.");
                return;
            }
        });
    });
    /* ]]> */
</script>

</body>
</html>