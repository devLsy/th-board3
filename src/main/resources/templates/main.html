<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
<table>
    <thead>
        <th>번호</th>
        <th>제목</th>
        <th>내용</th>
        <th>작성자</th>
        <th>등록일</th>
    </thead>
    <tbody id="boardBody">



    </tbody>
</table>

<script>

    const menu = "board";

    $(function () {
        getList("", 1, menu);
    });

    /**
     * 페이지 이동
     * @param currentPage
     */
    function movePage(currentPage){
    	//검색조건이 있을 경우에만 검색조건 추가(검색조건 유지한 채 페이지 이동)
    	(searchData != null) ? getList(searchData, currentPage, menu) : getList("", currentPage, menu);
    }

    /**
     * ajax 통신으로 리스트를 조회한다.
     * @param searchParam 검색조건
     * @param currentPage 현재 페이지
     * @param type 메뉴타입
     */
    function getList(searchParam, currentPage, type){
    	$.ajax({
    		url: "/api/" + type +"?currentPage=" + currentPage,
    		type:"get",
    		//IE 브라우저 사용 안한다는 가정하에 주석처리
    		// cache: false,
    		data: searchParam,
    		success: function (data){
    			//draw tbody
    			drawTbody(data, type);
    			//draw pagination
    			// drawPagination(data.paging);
    		},
    		error:function(e){
    		}
    	});
    }

    /**
     * tbody에 html을 덮어쓴다.
     * @param data
     * @param gubun
     */
    function drawTbody(data, gubun) {
        //drawHtml, draw 대상 tbody
        let htmlData, targetTbody = "";
        targetTbody = "boardBody";

        // foreach start
        for (let i = 0; i < data.list.length; i++) {
            htmlData += "<tr>";
            htmlData += "<td>";
            htmlData += data.list[i].no;
            htmlData += "</td>";
            htmlData += "<td>";
            htmlData += data.list[i].title;
            htmlData += "</td>";
            htmlData += "<td>";
            htmlData += data.list[i].content;
            htmlData += "</td>";
            htmlData += "<td>";
            htmlData += data.list[i].userId;
            htmlData += "</td>";
            htmlData += "<td>";
            htmlData += data.list[i].regDate;
            htmlData += "</td>";
            htmlData += "</tr>";
        }
        // foreach end
        //tbody에 반영
        $("#" + targetTbody + "").html(htmlData);
    }
    // end function getList()


</script>

</body>
</html>